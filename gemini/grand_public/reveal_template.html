<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>$title$</title>

  <!-- Reveal core -->
  <link rel="stylesheet" href="$revealjs-url$/dist/reveal.css" media="all">
  <link rel="stylesheet" href="$revealjs-url$/dist/theme/white.css" media="all">

  <!-- Ton CSS (styles A4, centrage, typo, gradient adouci, etc.) -->
  <link rel="stylesheet" href="print_styles_grand_public.css" media="all">
</head>
<body>
  <div class="reveal">
    <div class="slides">
      $body$
    </div>
  </div>

  <script src="$revealjs-url$/dist/reveal.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.1/dist/mermaid.min.js"></script>
  <script>
    // Géométrie stricte A4 paysage (~300 dpi)
    Reveal.initialize({
      width: 2480,
      height: 1754,
      margin: 0.02,
      center: true,
      hash: false,
      controls: false,
      progress: false,
      slideNumber: false,
      transition: 'fade'
    });

    function upgradeMermaidCodeBlocks() {
      document.querySelectorAll('pre > code.mermaid, pre > code.language-mermaid').forEach(code => {
        const pre = code.parentElement;
        const div = document.createElement('div');
        div.className = 'mermaid';
        div.textContent = code.textContent;
        pre.replaceWith(div);
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      upgradeMermaidCodeBlocks();
      mermaid.initialize({ startOnLoad: true, securityLevel: 'loose', theme: 'default' });
      setTimeout(() => mermaid.init(), 1500);
    });
  </script>
</body>
</html>
